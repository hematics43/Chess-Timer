<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fullscreen Chess Timer with Move Counter</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Arial, sans-serif;
    background: #f0f0f0;
    display: flex;
    flex-direction: column;
  }

  .controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    background: #222;
    color: #fff;
  }

  .controls input {
    width: 50px;
    padding: 5px;
    font-size: 1em;
    margin-left: 5px;
    text-align: center;
  }

  .controls button {
    padding: 8px 15px;
    font-size: 1em;
    margin-left: 5px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    background: #444;
    color: #fff;
  }

  .controls button:hover { background: #666; }
  .hidden { display: none; }

  .player {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-size: 3em;
    cursor: pointer;
    user-select: none;
    transition: background 0.2s;
  }

  .active { background: hsl(147, 91%, 46%); }
  .inactive { background: hwb(0 99% 1%); }

  .player h2 { margin: 0; font-size: 1em; }
  .player p { margin: 5px 0; }
  .move-counter { font-size: 1em; color: #555; }
</style>
</head>
<body>

<!-- Top Controls -->
<div class="controls" id="controlPanel">
  <div>
    Minutes: <input type="number" id="minutesInput" value="5" min="0" max="180">
    Seconds: <input type="number" id="secondsInput" value="0" min="0" max="59">
  </div>
  <div>
    <button id="startBtn">Start</button>
    <button id="resetBtn">Reset</button>
  </div>
</div>

<!-- Players -->
<div id="player1" class="player active">
  <p id="time1">05:00</p>
  <div class="move-counter">Moves: <span id="moves1">0</span></div>
</div>
<div id="player2" class="player inactive">
  <p id="time2">05:00</p>
  <div class="move-counter">Moves: <span id="moves2">0</span></div>
</div>

<!-- Tap sound -->
<audio id="tapSound" src="beep.ogg" preload="auto"></audio>

<script>
  let time1 = 5*60;
  let time2 = 5*60;
  let activePlayer = 1;
  let timer = null;
  let isRunning = false;

  let moves1 = 0;
  let moves2 = 0;

  const time1Display = document.getElementById('time1');
  const time2Display = document.getElementById('time2');
  const moves1Display = document.getElementById('moves1');
  const moves2Display = document.getElementById('moves2');
  const player1Div = document.getElementById('player1');
  const player2Div = document.getElementById('player2');
  const controlPanel = document.getElementById('controlPanel');
  const startBtn = document.getElementById('startBtn');
  const resetBtn = document.getElementById('resetBtn');
  const minutesInput = document.getElementById('minutesInput');
  const secondsInput = document.getElementById('secondsInput');
  const tapSound = document.getElementById('tapSound');

  function formatTime(seconds) {
    const m = Math.floor(seconds/60).toString().padStart(2,'0');
    const s = (seconds%60).toString().padStart(2,'0');
    return `${m}:${s}`;
  }

  function updateDisplay() {
    time1Display.textContent = formatTime(time1);
    time2Display.textContent = formatTime(time2);
    moves1Display.textContent = moves1;
    moves2Display.textContent = moves2;
  }

  function switchPlayer() {
    // Count moves
    if(activePlayer===1) moves1++;
    else moves2++;

    // Toggle active player
    activePlayer = activePlayer===1?2:1;
    player1Div.classList.toggle('active');
    player1Div.classList.toggle('inactive');
    player2Div.classList.toggle('active');
    player2Div.classList.toggle('inactive');

    // Play tap sound
    tapSound.currentTime = 0;
    tapSound.play();

    updateDisplay();
  }

  function tick() {
    if (!isRunning) return;
    if (activePlayer===1) {
      if(time1>0) time1--;
      else { stopGame(); alert("Player 2 wins!"); }
    } else {
      if(time2>0) time2--;
      else { stopGame(); alert("Player 1 wins!"); }
    }
    updateDisplay();
  }

  function startGame() {
    let minutes = parseInt(minutesInput.value);
    let seconds = parseInt(secondsInput.value);
    if (isNaN(minutes) || minutes < 0) minutes = 0;
    if (isNaN(seconds) || seconds < 0 || seconds > 59) seconds = 0;
    time1 = time2 = minutes*60 + seconds;
    moves1 = moves2 = 0;
    activePlayer = 1;
    player1Div.classList.add('active'); player1Div.classList.remove('inactive');
    player2Div.classList.add('inactive'); player2Div.classList.remove('active');
    updateDisplay();
    isRunning = true;
    timer = setInterval(tick,1000);
    controlPanel.classList.add('hidden');
    openFullscreen();
  }

  function stopGame() {
    clearInterval(timer);
    isRunning = false;
    controlPanel.classList.remove('hidden');
  }

  function resetGame() {
    stopGame();
    let minutes = parseInt(minutesInput.value)||5;
    let seconds = parseInt(secondsInput.value)||0;
    time1 = time2 = minutes*60 + seconds;
    moves1 = moves2 = 0;
    activePlayer = 1;
    player1Div.classList.add('active'); player1Div.classList.remove('inactive');
    player2Div.classList.add('inactive'); player2Div.classList.remove('active');
    updateDisplay();
  }

  player1Div.addEventListener('click',()=>{ if(isRunning && activePlayer===1) switchPlayer(); });
  player2Div.addEventListener('click',()=>{ if(isRunning && activePlayer===2) switchPlayer(); });
  startBtn.addEventListener('click', startGame);
  resetBtn.addEventListener('click', resetGame);

  updateDisplay();

  function openFullscreen() {
    const elem = document.documentElement;
    if (elem.requestFullscreen) { elem.requestFullscreen(); }
    else if (elem.webkitRequestFullscreen) { elem.webkitRequestFullscreen(); }
    else if (elem.msRequestFullscreen) { elem.msRequestFullscreen(); }
  }
</script>

</body>
</html>
